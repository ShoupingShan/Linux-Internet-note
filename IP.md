# 数据封装过程

|       |  以太帧头 |  目的地址 |源地址 | 包类型 |包数据| CRC |
|:-----:|:------:|:-----:|:----:|:----:|:-------:|:--|
|应用数据|        |       |      |      | 字节流(数据)   ||
|应用层  |        |       |      |FTP头  |数据      ||
|传输层|          |       | TCP头 |FTP头  |数据  ||
|网络层 |         |IP头    |TCP头  | FTP头  |数据||
|数据链路层 |     以太帧头    |IP头    |TCP头  | FTP头  |数据| ||

## IP包头
#### 结构
* 固定长度:20字节 (32*5/8)
* 其它选项(可能有)
* 所以每一次都需要检测包头的总长度是多少,所以传输速度较慢

#### eg
    1.    00000000.00000000.00000000.00000000
    2.    11111111.11111111.11111111.11111111
    3.    0.0.0.0
    4.    255.255.255

## IP地址分类

|网络类别|最大网络数|IP地址范围|最大主机数|私有IP地址范围(免费)|
|:-----:|:------:|:-------:|:------:|:----------:|
|A    |126(2^7-2)|1.0.0.0--126.255.255.255|2^24-2|10.0.0.0--10.255.255.255|
|B|16384(2^14)|128.0.0.0--191.255.255.255|2^16-2|172.16.0.0--172.31.255.255|
|C|2097152(2^21)|192.0.0.0--223.255.255.255|2^8-2|192.168.0.0--192.168.255.255|

* ## 注:
>A中第一个数(2^8)表示不同的网段(使用路由器跨网络通信),后三个数(2^24-2)表示同一网段的不同主机(可使用交换机直接通信),1.0.0.0代表网络本身,不能分配;  1.255.255.255代表当前网络的广播地址.

 >其中127.0.0.1表示计算机自己,

 >B中前两个数位(2^14)表示不同的网段(使用路由器跨网络通信),后两个数(2^16-2)表示同一网段的不同主机(可使用交换机直接通信).

 >C中前三个数位(2^21)表示不同的网段(使用路由器跨网络通信),最后一个数(2^8-2)表示同一网段的不同主机(可使用交换机直接通信).

#### 公网IP不能直接访问私有IP地址

## 子网掩码的使用
* 子网掩码不能和IP地址分开
* 标准子网掩码

        255.0.0.0

        255.255.0.0

        255.255.255.0

* A类标准子网掩码

|IP Address| 10.  |1.1.200|
|:--------:|:---:|:-----:|
|Subnet Mask|255.|0.0.0|
|Network ID|10.|0.0.0|

* B类标准子网掩码

|IP Address| 172.16.  |1.200|
|:--------:|:---:|:-----:|
|Subnet Mask|255.255.|0.0|
|Network ID|172.16.|0.0|

* C类标准子网掩码

|IP Address| 192.168.1.  |200|
|:--------:|:---:|:-----:|
|Subnet Mask|255.255.255.|0|
|Network ID|192.168.1.|0|

* 变长子网掩码及子网规划

      IP地址: 172.16.2.121(B类IP)
      子网掩码:255.255.255.0(C类子网掩码)
      (可以指定任意的合法的子网掩码,合法的意义是:所有的1是连续的,没有断开)

||网络位|网络位|子网位|主机位|
|:-:|:-:|:-:|:--:|:--:|
|172.16.2.121|10101100|00010000|00000010|01111001|
|255.255.255.0|11111111|11111111|11111111|00000000|
|网络地址|10101100|00010000|00000010|00000000|
|广播地址|10101100|00010000|00000010|11111111|
